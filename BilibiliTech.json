{"title":"幻电物业 - B站技术中心","url":"https://space.bilibili.com/393183630/article","favicon":"https://space.bilibili.com/393183630/favicon.ico","elements":[{"title":"浏览器渲染原理与弹幕","contents":"<a href=\"//www.bilibili.com/read/cv23037087\" target=\"_blank\" title=\"本期作者背景随着弹幕数量越来越多，以及我们会不断的往视频上面添加越来越多的动画，如何让各种弹幕流畅的展示给我们的用户，成为了我们必须要考虑的问题。这要求我们需要了解浏览器底层的渲染原理，才能以最低的性能消耗来实现我们的各种弹幕效果，知道哪些性能消耗是我们前端可以避免的。目标通过此篇介绍，可以了解到：我们实现的动画，在浏览器上具体是怎么显示到屏幕上，以及可以通过减少哪些地方的消耗，来实现更加流畅的动画。正文（一）chrome多进程模型1.1 主要进程各个进程具体负责的工作内容：除了上面列出来的进程，Chro\">\n                      本期作者背景随着弹幕数量越来越多，以及我们会不断的往视频上面添加越来越多的动画，如何让各种弹幕流畅的展示给我们的用户，成为了我们必须要考虑的问题。这要求我们需要了解浏览器底层的渲染原理，才能以最低的性能消耗来实现我们的各种弹幕效果，知道哪些性能消耗是我们前端可以避免的。目标通过此篇介绍，可以了解到：我们实现的动画，在浏览器上具体是怎么显示到屏幕上，以及可以通过减少哪些地方的消耗，来实现更加流畅的动画。正文（一）chrome多进程模型1.1 主要进程各个进程具体负责的工作内容：除了上面列出来的进程，Chro\n                    </a>","link":"https://www.bilibili.com/read/cv23037087","retrieved":1681709664186},{"title":"实现亿级费用减省,B站大数据治理之路","contents":"<a href=\"//www.bilibili.com/read/cv22970825\" target=\"_blank\" title=\"本期作者B站大数据历史B站大数据成立历史公司流量快速增长、数据必然爆发式增长以增加资产解决资源瓶颈已不是长期方案互联网公司发展到一定阶段，各种场景的数据需求会越来越多，业务通过数据进行快速迭代、决策，已成为各家互联网公司必备的能力。要解决猛增 数据的清洗 以及 海量历史数据的加工，势必要引入大数据能力。B站是 09 年成立的互联网公司，但整体大数据体系的建设相对较晚，17年成立大数据团队，19年才开始规模化的建设，随着公司快速发展，数据规模也在爆发式的增长。（图一 往年大数据规模）截至 23 年 B站数据\">\n                      本期作者B站大数据历史B站大数据成立历史公司流量快速增长、数据必然爆发式增长以增加资产解决资源瓶颈已不是长期方案互联网公司发展到一定阶段，各种场景的数据需求会越来越多，业务通过数据进行快速迭代、决策，已成为各家互联网公司必备的能力。要解决猛增 数据的清洗 以及 海量历史数据的加工，势必要引入大数据能力。B站是 09 年成立的互联网公司，但整体大数据体系的建设相对较晚，17年成立大数据团队，19年才开始规模化的建设，随着公司快速发展，数据规模也在爆发式的增长。（图一 往年大数据规模）截至 23 年 B站数据\n                    </a>","link":"https://www.bilibili.com/read/cv22970825","retrieved":1681709664186},{"title":"视频化 Feed 流架构演进","contents":"<a href=\"//www.bilibili.com/read/cv22891914\" target=\"_blank\" title=\"本期作者Feed流Feed 流可以分为两部分来看，即 Feed+ 流，首先看第一部分 Feed，在英文中 Feed 是投喂的意思，也就是你喜欢什么样的内容，就给你什么样的内容，而流则是给用户呈现信息的形式。结合起来就是 Feed 流是一种持续更新并呈现给用户内容的信息流。维基百科对 Feed 的定义如下：On the World Wide Web, a web feed (or news feed) is a data format used for providing users with freque\">\n                      本期作者Feed流Feed 流可以分为两部分来看，即 Feed+ 流，首先看第一部分 Feed，在英文中 Feed 是投喂的意思，也就是你喜欢什么样的内容，就给你什么样的内容，而流则是给用户呈现信息的形式。结合起来就是 Feed 流是一种持续更新并呈现给用户内容的信息流。维基百科对 Feed 的定义如下：On the World Wide Web, a web feed (or news feed) is a data format used for providing users with freque\n                    </a>","link":"https://www.bilibili.com/read/cv22891914","retrieved":1681709664190},{"title":"B站基于 Flink 的海量用户行为实时 ETL 应用实践","contents":"<a href=\"//www.bilibili.com/read/cv22827649\" target=\"_blank\" title=\"本期作者1、背景在数仓分层架构体系中，从 ODS层到 DWD层数据转换需要进行数据清洗、脱敏、列式压缩等步骤。在B站用户行为埋点数据 ODS到 DWD层转换过程中，为了解决日增千亿条、20+TB/天增量规模下数据重复摄取带来的资源严重消耗的问题，引入了北极星（B站用户埋点行为分析链路）分流，按照部门进行分表。在埋点设计中使用spmid模型，将事件类型拆分为浏览 pv、曝光 show、点击 click等多个事件类型，并以这些事件类型作为除天、小时分区以外的第三级分区，再以事件类型产品来源作为四级分区。通过基\">\n                      本期作者1、背景在数仓分层架构体系中，从 ODS层到 DWD层数据转换需要进行数据清洗、脱敏、列式压缩等步骤。在B站用户行为埋点数据 ODS到 DWD层转换过程中，为了解决日增千亿条、20+TB/天增量规模下数据重复摄取带来的资源严重消耗的问题，引入了北极星（B站用户埋点行为分析链路）分流，按照部门进行分表。在埋点设计中使用spmid模型，将事件类型拆分为浏览 pv、曝光 show、点击 click等多个事件类型，并以这些事件类型作为除天、小时分区以外的第三级分区，再以事件类型产品来源作为四级分区。通过基\n                    </a>","link":"https://www.bilibili.com/read/cv22827649","retrieved":1681709664190},{"title":"B站PC客户端-架构设计","contents":"<a href=\"//www.bilibili.com/read/cv22750308\" target=\"_blank\" title=\"本期作者众所周知，B站是个学习的网站，网页端和粉版移动端都非常的好用，不过，相对其它平台来说B站的PC客户端也算是大器晚成了。在有些场景PC客户端的优势也是显而易见的，比如，跓留电脑桌面的快捷、独立的应用窗口、特有的交互方式等，因此就有了很多喜欢B站的技术大佬整出了不少体验不错的第三方PC应用，比如云之幻版、逍遥橙子版等。当然我站也有一个源自三方的UWP客户端，但是由于历史原因一直没有得到很好的维护，在21年底，一个需要在电脑端预装的需求让我们有了开发一个全新的PC客户端的想法。一、PC客户端的技术选型选\">\n                      本期作者众所周知，B站是个学习的网站，网页端和粉版移动端都非常的好用，不过，相对其它平台来说B站的PC客户端也算是大器晚成了。在有些场景PC客户端的优势也是显而易见的，比如，跓留电脑桌面的快捷、独立的应用窗口、特有的交互方式等，因此就有了很多喜欢B站的技术大佬整出了不少体验不错的第三方PC应用，比如云之幻版、逍遥橙子版等。当然我站也有一个源自三方的UWP客户端，但是由于历史原因一直没有得到很好的维护，在21年底，一个需要在电脑端预装的需求让我们有了开发一个全新的PC客户端的想法。一、PC客户端的技术选型选\n                    </a>","link":"https://www.bilibili.com/read/cv22750308","retrieved":1681709664190},{"title":"B站多云管理平台建设","contents":"<a href=\"//www.bilibili.com/read/cv22693220\" target=\"_blank\" title=\"本期作者 SYS平台 B站系统部平台团队，负责全站基础设施管理平台化和自动化、混合云IaC、资源运营CMDB等业务系统研发1.前言为什么使用多云：公有云因为其弹性、按需使用以及多地域的覆盖等优势，企业在高速发展的过程中往往会选择公有云来提供应用所需的基础设施；为了高稳定性和成本最优的考虑，一般会引入多家云厂商； 多云部署防止单一云厂商故障导致服务完全不可用； 采用多云也提升了采购上的议价能力，避免单一厂商绑定，在价格谈判中处于劣势；不同的云厂商在覆盖的地域、产品的能力上不一致，引入多云可以充分发挥各厂商的\">\n                      本期作者 SYS平台 B站系统部平台团队，负责全站基础设施管理平台化和自动化、混合云IaC、资源运营CMDB等业务系统研发1.前言为什么使用多云：公有云因为其弹性、按需使用以及多地域的覆盖等优势，企业在高速发展的过程中往往会选择公有云来提供应用所需的基础设施；为了高稳定性和成本最优的考虑，一般会引入多家云厂商； 多云部署防止单一云厂商故障导致服务完全不可用； 采用多云也提升了采购上的议价能力，避免单一厂商绑定，在价格谈判中处于劣势；不同的云厂商在覆盖的地域、产品的能力上不一致，引入多云可以充分发挥各厂商的\n                    </a>","link":"https://www.bilibili.com/read/cv22693220","retrieved":1681709664194},{"title":"B站埋点分析平台的构建之路","contents":"<a href=\"//www.bilibili.com/read/cv22600289\" target=\"_blank\" title=\"本期作者前言B站内各业务产品迭代离不开各种数据决策，而依托于埋点的用户行为数据在其中起到了 关键作用。埋点也是算法推荐、渠道投放、业务决策的重要数据来源，鉴于此，如何规范埋点设计，高效采集，让业务团队快速直观分析成为了推进业务发展的重要一环。本文主要分享B站过去在埋点规范设计、埋点分析应用的经验，我们相信数据只有流动起来，才能发挥它的价值，The data must flow！业务背景简介在 B站，产品的迭代少不了数据指标的监测，公司内各业务线的产品经理、运营、分析师会关注产品内部的各个指标，从数据采集到\">\n                      本期作者前言B站内各业务产品迭代离不开各种数据决策，而依托于埋点的用户行为数据在其中起到了 关键作用。埋点也是算法推荐、渠道投放、业务决策的重要数据来源，鉴于此，如何规范埋点设计，高效采集，让业务团队快速直观分析成为了推进业务发展的重要一环。本文主要分享B站过去在埋点规范设计、埋点分析应用的经验，我们相信数据只有流动起来，才能发挥它的价值，The data must flow！业务背景简介在 B站，产品的迭代少不了数据指标的监测，公司内各业务线的产品经理、运营、分析师会关注产品内部的各个指标，从数据采集到\n                    </a>","link":"https://www.bilibili.com/read/cv22600289","retrieved":1681709664195},{"title":"bilibili-AVIF图片格式落地","contents":"<a href=\"//www.bilibili.com/read/cv22543150\" target=\"_blank\" title=\"本期作者背景图片库加载服务是为bilibili打造的移动端一站式解决方案，集图像加载、显示、处理、监控于一体，以高可用、高性能、可高度定制、数据服务、省流量五大核心优势被公司各个业务接入使用，经过长期的迭代与维护，已成熟稳定。在如今越来越看重体验的大环境下，对图片库的要求也日益攀升。从成本的角度来看，使用AVIF格式可以节省大量的网络带宽和存储空间，减少网站加载时间，并且可以改善用户体验，进而提高网站的效率和收益，从而节约大量的费用。AVIF格式能够带来许多优势，首先，AVIF格式具有明显的压缩率优势，可\">\n                      本期作者背景图片库加载服务是为bilibili打造的移动端一站式解决方案，集图像加载、显示、处理、监控于一体，以高可用、高性能、可高度定制、数据服务、省流量五大核心优势被公司各个业务接入使用，经过长期的迭代与维护，已成熟稳定。在如今越来越看重体验的大环境下，对图片库的要求也日益攀升。从成本的角度来看，使用AVIF格式可以节省大量的网络带宽和存储空间，减少网站加载时间，并且可以改善用户体验，进而提高网站的效率和收益，从而节约大量的费用。AVIF格式能够带来许多优势，首先，AVIF格式具有明显的压缩率优势，可\n                    </a>","link":"https://www.bilibili.com/read/cv22543150","retrieved":1681709664195},{"title":"2D矢量动画在B站的探索与实践-三角剖分","contents":"<a href=\"//www.bilibili.com/read/cv22453976\" target=\"_blank\" title=\"本期作者三角剖分在前文中，我们拥有了对一个矢量图形的路径描述。在本文中我们会介绍，如何将已有的路径描述 (Path) 转化为，GPU可读取的三角形的顶点数据。整体处理过程如下图所示，路径作为输入，折线化模块首先使用折线近似曲线将其转化为复杂多边形，接着将复杂多边形简单化、简单多边形单调化、单调多边形三角化，最终得到一组三角形作为输出！上图中相关的概念解释如下（可能与通常的定义略有差异）：简单多边形：边不相交的多边形复杂多边形：除了简单多边形之外的多边形单调多边形：如果一个多边形基于它的 y（或x）坐标值最\">\n                      本期作者三角剖分在前文中，我们拥有了对一个矢量图形的路径描述。在本文中我们会介绍，如何将已有的路径描述 (Path) 转化为，GPU可读取的三角形的顶点数据。整体处理过程如下图所示，路径作为输入，折线化模块首先使用折线近似曲线将其转化为复杂多边形，接着将复杂多边形简单化、简单多边形单调化、单调多边形三角化，最终得到一组三角形作为输出！上图中相关的概念解释如下（可能与通常的定义略有差异）：简单多边形：边不相交的多边形复杂多边形：除了简单多边形之外的多边形单调多边形：如果一个多边形基于它的 y（或x）坐标值最\n                    </a>","link":"https://www.bilibili.com/read/cv22453976","retrieved":1681709664196},{"title":"HDFS EC在B站的实践","contents":"<a href=\"//www.bilibili.com/read/cv22380724\" target=\"_blank\" title=\"本期作者1.背景随着B站业务的高速发展，业务产生的数据每天以PB级的速度持续增长，之前主要应对方法是分析数据的使用频率，把数据分为热冷俩类数据，对冷数据进行高密存储来降低存储成本，以及对部分非核心的冷数据进行数据周期管理。随着体量的增大，即使TTL机制的运行，冷数据的存储量也越来越多，这部分数据长时间未有访问，但仍然具有一定的价值，不能随意清理，且占总体数据量的30%以上，现有的高密存储机制虽然能一定程度上降低存储成本，但是为了进一步的降本增效，我们计划用技术手段进一步节省存储成本。目前社区针对降低存储容\">\n                      本期作者1.背景随着B站业务的高速发展，业务产生的数据每天以PB级的速度持续增长，之前主要应对方法是分析数据的使用频率，把数据分为热冷俩类数据，对冷数据进行高密存储来降低存储成本，以及对部分非核心的冷数据进行数据周期管理。随着体量的增大，即使TTL机制的运行，冷数据的存储量也越来越多，这部分数据长时间未有访问，但仍然具有一定的价值，不能随意清理，且占总体数据量的30%以上，现有的高密存储机制虽然能一定程度上降低存储成本，但是为了进一步的降本增效，我们计划用技术手段进一步节省存储成本。目前社区针对降低存储容\n                    </a>","link":"https://www.bilibili.com/read/cv22380724","retrieved":1681709664197},{"title":"哔哩哔哩大数据平台建设之路—数据安全篇","contents":"<a href=\"//www.bilibili.com/read/cv22311643\" target=\"_blank\" title=\"本期作者1.序言Berserker是B站一站式数据开发及治理平台，基于常用大数据生态组件构建，满足公司内数据查询、数据分析、日常报表、数据集成、数据开发、实时计算和数据治理等各种业务场景。在B站，我们一般将Berserker简写为BSK。图1. Berserker的整体架构图2. Berserker主页其中，数据安全是Berserker平台中重要的一部分，它将为公司内部 Hive、Kafka、ClickHouse、ETL任务等各种资产进行统一的数据安全管理，并为数据平台部内部的数据开发、数据分析、数据报表\">\n                      本期作者1.序言Berserker是B站一站式数据开发及治理平台，基于常用大数据生态组件构建，满足公司内数据查询、数据分析、日常报表、数据集成、数据开发、实时计算和数据治理等各种业务场景。在B站，我们一般将Berserker简写为BSK。图1. Berserker的整体架构图2. Berserker主页其中，数据安全是Berserker平台中重要的一部分，它将为公司内部 Hive、Kafka、ClickHouse、ETL任务等各种资产进行统一的数据安全管理，并为数据平台部内部的数据开发、数据分析、数据报表\n                    </a>","link":"https://www.bilibili.com/read/cv22311643","retrieved":1681709664197},{"title":"资源隔离技术之内存隔离","contents":"<a href=\"//www.bilibili.com/read/cv22232558\" target=\"_blank\" title=\"本期作者 SYS-OS B站系统部操作系统（SYS-OS）团队负责公司OS层面系统软件支持覆盖内核优化、系统工具、操作系统镜像、软硬件结合等方向的工作1.混部的内存隔离现状在降本增效的大背景下，为提高机器资源利用率，将不同优先级的在线业务(通常为延迟敏感型高优先级任务)和离线任务(通常为延时不敏感型低优先级任务)部署在相同的物理机器上。内存作为重要资源，混部任务一旦调度到某个k8s节点后，在内存资源使用上可能对在线任务产生竞争，为了避免此种情况对在线任务的干扰，我们可能需要感知在线任务的负载情况并做相应的\">\n                      本期作者 SYS-OS B站系统部操作系统（SYS-OS）团队负责公司OS层面系统软件支持覆盖内核优化、系统工具、操作系统镜像、软硬件结合等方向的工作1.混部的内存隔离现状在降本增效的大背景下，为提高机器资源利用率，将不同优先级的在线业务(通常为延迟敏感型高优先级任务)和离线任务(通常为延时不敏感型低优先级任务)部署在相同的物理机器上。内存作为重要资源，混部任务一旦调度到某个k8s节点后，在内存资源使用上可能对在线任务产生竞争，为了避免此种情况对在线任务的干扰，我们可能需要感知在线任务的负载情况并做相应的\n                    </a>","link":"https://www.bilibili.com/read/cv22232558","retrieved":1681709664198}]}