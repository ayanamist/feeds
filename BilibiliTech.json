{"title":"幻电物业 - B站技术中心","url":"https://space.bilibili.com/393183630/article","favicon":"https://space.bilibili.com/393183630/favicon.ico","elements":[{"title":"爬虫与反爬-接口安全的风控介绍","contents":"<a href=\"//www.bilibili.com/read/cv28615128\" target=\"_blank\" title=\"本期作者1、接口反爬背景接口反爬，或者说更广义的接口安全，一直以来都是网站和app绕不开的基础问题。尤其是平台的规模扩大，各种功能性的接口包含的信息量越来越多，这也让各种目的的脚本爬虫有了获利的空间和爬取数据的动力。而对于一个平台而言，爬虫流量不同于正常流量，基本上无法带来正向的效益（除了搜索引擎爬虫尚且有推广平台的效果），它们对平台的危害是多方面的：（1）对平台开发和运维，爬虫大量的恶意请求极大地占用了平台服务端带宽和计算资源，让平台无故增加了运维的成本，一些保护程度较低的接口还可能被爬虫流量撑爆，甚至\">\n                      本期作者1、接口反爬背景接口反爬，或者说更广义的接口安全，一直以来都是网站和app绕不开的基础问题。尤其是平台的规模扩大，各种功能性的接口包含的信息量越来越多，这也让各种目的的脚本爬虫有了获利的空间和爬取数据的动力。而对于一个平台而言，爬虫流量不同于正常流量，基本上无法带来正向的效益（除了搜索引擎爬虫尚且有推广平台的效果），它们对平台的危害是多方面的：（1）对平台开发和运维，爬虫大量的恶意请求极大地占用了平台服务端带宽和计算资源，让平台无故增加了运维的成本，一些保护程度较低的接口还可能被爬虫流量撑爆，甚至\n                    </a>","link":"https://www.bilibili.com/read/cv28615128","retrieved":1703352816239},{"title":"B站画质补完计划（1）：插帧提升《雍正王朝》等视频流畅度","contents":"<a href=\"//www.bilibili.com/read/cv28544691\" target=\"_blank\" title=\"本期作者1 前言喜欢观看历史剧的观众在B站刷剧时或许已经留意到，经典历史正剧《雍正王朝》悄然将画质从540p@25fps提升至1080p@50fps。在高清高帧率的加持下，这部描绘雍正皇帝生平的经典之作，以丝滑清晰的画面为观众带来了一场全新的视觉盛宴。图1. 左：修复前540p@25fps，右：修复后1080p@50fps而之所以视频流畅度会有如此大的提升，我们自研的视频插帧算法在其中发挥着关键作用。那么，插帧算法是如何实现帧率的提高、相较于目前开源的插帧算法，它又是如何克服视频插帧中常见问题的呢？接下来\">\n                      本期作者1 前言喜欢观看历史剧的观众在B站刷剧时或许已经留意到，经典历史正剧《雍正王朝》悄然将画质从540p@25fps提升至1080p@50fps。在高清高帧率的加持下，这部描绘雍正皇帝生平的经典之作，以丝滑清晰的画面为观众带来了一场全新的视觉盛宴。图1. 左：修复前540p@25fps，右：修复后1080p@50fps而之所以视频流畅度会有如此大的提升，我们自研的视频插帧算法在其中发挥着关键作用。那么，插帧算法是如何实现帧率的提高、相较于目前开源的插帧算法，它又是如何克服视频插帧中常见问题的呢？接下来\n                    </a>","link":"https://www.bilibili.com/read/cv28544691","retrieved":1703352816240},{"title":"带货业务体系平台化建设与探索","contents":"<a href=\"//www.bilibili.com/read/cv28469729\" target=\"_blank\" title=\"本期作者背景带货作为近年来一种新兴、高效的营销形式，在商业侧最早以耦合在必选和邀约广告的业务形态中存在，直到22年中开始作为明确的业务探索方向。从初步确定带货业务的基本定位，到短短的一年多时间，业务极速发展，无论是带货up数还是带货收益以及平台收益层面，均有较快的增长，到目前已形成初具规模的业务体量。期间对于技术侧而言，面对相当多的困难，特别是在几乎无任何基础无独立系统的历史状况下，如何构建高效稳定的平台体系去支撑带货业务的快速迭代和发展需求，存在极大的挑战。现状与问题业务场景带货属于典型的人货场型业务，\">\n                      本期作者背景带货作为近年来一种新兴、高效的营销形式，在商业侧最早以耦合在必选和邀约广告的业务形态中存在，直到22年中开始作为明确的业务探索方向。从初步确定带货业务的基本定位，到短短的一年多时间，业务极速发展，无论是带货up数还是带货收益以及平台收益层面，均有较快的增长，到目前已形成初具规模的业务体量。期间对于技术侧而言，面对相当多的困难，特别是在几乎无任何基础无独立系统的历史状况下，如何构建高效稳定的平台体系去支撑带货业务的快速迭代和发展需求，存在极大的挑战。现状与问题业务场景带货属于典型的人货场型业务，\n                    </a>","link":"https://www.bilibili.com/read/cv28469729","retrieved":1703352816241},{"title":"B站边缘网络四层负载均衡器的探索与应用","contents":"<a href=\"//www.bilibili.com/read/cv28368470\" target=\"_blank\" title=\"本期作者01 背景介绍B站的 CDN 下行边缘节点过去是非集群化架构。这种架构下有几个弊端：增加调度逻辑复杂性；同机房流量/负载难以均衡；暴露过多的公网IP，增加安全隐患 (盗链等)；灰度流量比例分配粒度大；针对以上问题，我们调研了常见的四层负载均衡器， 传统的 SLB，LVS，DPVS 这类四层负载均衡器，在功能上也能满足我们现有的需求。但是以上几个负载均衡器均需要独占机器，进而造成成本升高，资源浪费。有没有一种既不增加成本，又能解决边缘节点四层负载需求的方案呢？由 Cloudflare 提出的基于 E\">\n                      本期作者01 背景介绍B站的 CDN 下行边缘节点过去是非集群化架构。这种架构下有几个弊端：增加调度逻辑复杂性；同机房流量/负载难以均衡；暴露过多的公网IP，增加安全隐患 (盗链等)；灰度流量比例分配粒度大；针对以上问题，我们调研了常见的四层负载均衡器， 传统的 SLB，LVS，DPVS 这类四层负载均衡器，在功能上也能满足我们现有的需求。但是以上几个负载均衡器均需要独占机器，进而造成成本升高，资源浪费。有没有一种既不增加成本，又能解决边缘节点四层负载需求的方案呢？由 Cloudflare 提出的基于 E\n                    </a>","link":"https://www.bilibili.com/read/cv28368470","retrieved":1703352816241},{"title":"前端DevOps平台的探索及设计理念","contents":"<a href=\"//www.bilibili.com/read/cv28291505\" target=\"_blank\" title=\"本期作者Jinkela（金坷垃）Pipeline 是一套用于前端 DevOps 的实验性的胶水工具，解决了许多开发流程中的细节问题，希望简化前端发布的操作难度，如今能力被集成到 Dejavu(逮虾户) 这个在线平台，承载上百个前端业务仓库的 CI/CD 能力。本次分享我想尽可能帮助你:了解前端发布相关的“提示词”。了解该项目早期的想法和设计。了解如何复刻一套简单可行、便于维护的、适用于前端的发布流程, 中途需要关注哪些细节?动机不合理流程设计带来的潜在危害不合理的流程设计，会导致开发者心惊胆战，即便今后改\">\n                      本期作者Jinkela（金坷垃）Pipeline 是一套用于前端 DevOps 的实验性的胶水工具，解决了许多开发流程中的细节问题，希望简化前端发布的操作难度，如今能力被集成到 Dejavu(逮虾户) 这个在线平台，承载上百个前端业务仓库的 CI/CD 能力。本次分享我想尽可能帮助你:了解前端发布相关的“提示词”。了解该项目早期的想法和设计。了解如何复刻一套简单可行、便于维护的、适用于前端的发布流程, 中途需要关注哪些细节?动机不合理流程设计带来的潜在危害不合理的流程设计，会导致开发者心惊胆战，即便今后改\n                    </a>","link":"https://www.bilibili.com/read/cv28291505","retrieved":1703352816242},{"title":"B站安全生产专项建设实践","contents":"<a href=\"//www.bilibili.com/read/cv28192102\" target=\"_blank\" title=\"本期作者1. 我们为什么要做安全生产2023 年H1，B 站集中出现了多个因变更导致的应急事件。从Google SRE和行业的分享经验我们知道 70%的此类事件是由变更导致的。需要认识到，历史上任何技术债务都不会自行消失。如果我们不加以治理，这些问题将在某个不经意的时候爆发，届时我们将不得不付出数倍的代价。H1 的几个变更风险，未能被及时扼杀在摇篮中，以至于发布到线上环境才发现问题，甚至还需要较长时间才得以恢复。我们深入分析了几个典型情况：某个非工作日，一个低等级L3新服务上线，依赖某个L0基础服务，因代\">\n                      本期作者1. 我们为什么要做安全生产2023 年H1，B 站集中出现了多个因变更导致的应急事件。从Google SRE和行业的分享经验我们知道 70%的此类事件是由变更导致的。需要认识到，历史上任何技术债务都不会自行消失。如果我们不加以治理，这些问题将在某个不经意的时候爆发，届时我们将不得不付出数倍的代价。H1 的几个变更风险，未能被及时扼杀在摇篮中，以至于发布到线上环境才发现问题，甚至还需要较长时间才得以恢复。我们深入分析了几个典型情况：某个非工作日，一个低等级L3新服务上线，依赖某个L0基础服务，因代\n                    </a>","link":"https://www.bilibili.com/read/cv28192102","retrieved":1703352816245},{"title":"大型直播活动保障S13的实践和思考","contents":"<a href=\"//www.bilibili.com/read/cv28070439\" target=\"_blank\" title=\"本期作者背景和目标英雄联盟全球总决赛是英雄联盟赛事每年度最受瞩目的节点，也是B站全年赛事热度最高的时段。第13届英雄联盟全球总决赛（下文简称S13）今年继续在B站进行直播，本文主要分享S13赛事保障的实践和思考。S13的业务主目标是观赛用户达到1.2亿，可拆解到赛前、赛中、赛后三个阶段：赛前重在流量蓄水，扩大目标用户，通过赛事活动预热、资源位投放、预约/Push召回，将流量引流到S13赛事主房间（下文简称主房间）观赛。赛中用户集中在主房间，重点在提升用户观赛以及互动体验，提高用户的转化率和留存率。赛后引导\">\n                      本期作者背景和目标英雄联盟全球总决赛是英雄联盟赛事每年度最受瞩目的节点，也是B站全年赛事热度最高的时段。第13届英雄联盟全球总决赛（下文简称S13）今年继续在B站进行直播，本文主要分享S13赛事保障的实践和思考。S13的业务主目标是观赛用户达到1.2亿，可拆解到赛前、赛中、赛后三个阶段：赛前重在流量蓄水，扩大目标用户，通过赛事活动预热、资源位投放、预约/Push召回，将流量引流到S13赛事主房间（下文简称主房间）观赛。赛中用户集中在主房间，重点在提升用户观赛以及互动体验，提高用户的转化率和留存率。赛后引导\n                    </a>","link":"https://www.bilibili.com/read/cv28070439","retrieved":1703352816245},{"title":"B站故障演练平台实践","contents":"<a href=\"//www.bilibili.com/read/cv27905829\" target=\"_blank\" title=\"本期作者背景在云原生的架构下，微服务的数量呈现爆炸式增长，服务间的调用关系错综复杂，对系统可靠性也提出了更高的要求。在这样的背景之下，混沌工程的关注度也不断提升。事实上，混沌工程早就不是什么新鲜的概念，早在2008年开始，混沌工程的思想就已经始萌芽，彼时，网飞公司由于数据库发生故障，导致了三天时间的停机，使得 DVD 在线租赁业务中断，造成了巨大的经济损失，正是这次线上事故推动了后续的 ChaosMonkeyV1 项目的诞生。在那之后，类似于 SimianArmy、ChaosKong、Gremlin、Ch\">\n                      本期作者背景在云原生的架构下，微服务的数量呈现爆炸式增长，服务间的调用关系错综复杂，对系统可靠性也提出了更高的要求。在这样的背景之下，混沌工程的关注度也不断提升。事实上，混沌工程早就不是什么新鲜的概念，早在2008年开始，混沌工程的思想就已经始萌芽，彼时，网飞公司由于数据库发生故障，导致了三天时间的停机，使得 DVD 在线租赁业务中断，造成了巨大的经济损失，正是这次线上事故推动了后续的 ChaosMonkeyV1 项目的诞生。在那之后，类似于 SimianArmy、ChaosKong、Gremlin、Ch\n                    </a>","link":"https://www.bilibili.com/read/cv27905829","retrieved":1703352816246},{"title":"B站自研新一代视频编码器 BILIAV1","contents":"<a href=\"//www.bilibili.com/read/cv27833592\" target=\"_blank\" title=\"本期作者1. AV1 视频编码标准介绍AV1是开放媒体联盟（AOM， Alliance for Open Media）开发的第一代开放，免版税的视频编码标准。AV1于 2018 年 3 月定稿，相同画质下，码率比 H.265/HEVC 低 20% 左右。经过 Google、Netflix、Meta、Amazon 等互联网巨头的不断推广，目前 AV1 生态逐步发展成熟：PC 侧显卡供应商 AMD､ Intel 和 Nvidia 均已经发布支持 AV1 硬解的相关产品；移动端 MediaTek､ Qualco\">\n                      本期作者1. AV1 视频编码标准介绍AV1是开放媒体联盟（AOM， Alliance for Open Media）开发的第一代开放，免版税的视频编码标准。AV1于 2018 年 3 月定稿，相同画质下，码率比 H.265/HEVC 低 20% 左右。经过 Google、Netflix、Meta、Amazon 等互联网巨头的不断推广，目前 AV1 生态逐步发展成熟：PC 侧显卡供应商 AMD､ Intel 和 Nvidia 均已经发布支持 AV1 硬解的相关产品；移动端 MediaTek､ Qualco\n                    </a>","link":"https://www.bilibili.com/read/cv27833592","retrieved":1703352816249},{"title":"云厂商CDN故障后，连夜设计了云边端协同新方案","contents":"<a href=\"//www.bilibili.com/read/cv27753037\" target=\"_blank\" title=\"本期作者1、背景事件简述：2023年8月4日 21:00-21:20 云厂商 CDN 服务故障，回源流量突增导致 BFS SLB 过载，影响依赖图片、JS/CSS静态资源的服务，大量用户出现白屏和无法播放视频的问题。事件原因：因为云厂商 CDN 故障，自动执行域名下线策略，策略如下：解析回源：域名被下线时，域名会解析回主源站停用域名：域名被下线时，域名会被调整为”停用“状态，停止 CDN 加速服务，并且返回403解析回源策略，瞬间产生几百G的流量，”攻击”源站BFS服务，服务瘫痪停用域名策略，会造成大量用\">\n                      本期作者1、背景事件简述：2023年8月4日 21:00-21:20 云厂商 CDN 服务故障，回源流量突增导致 BFS SLB 过载，影响依赖图片、JS/CSS静态资源的服务，大量用户出现白屏和无法播放视频的问题。事件原因：因为云厂商 CDN 故障，自动执行域名下线策略，策略如下：解析回源：域名被下线时，域名会解析回主源站停用域名：域名被下线时，域名会被调整为”停用“状态，停止 CDN 加速服务，并且返回403解析回源策略，瞬间产生几百G的流量，”攻击”源站BFS服务，服务瘫痪停用域名策略，会造成大量用\n                    </a>","link":"https://www.bilibili.com/read/cv27753037","retrieved":1703352816250},{"title":"语聊房架构演进实践","contents":"<a href=\"//www.bilibili.com/read/cv27682252\" target=\"_blank\" title=\"本期作者序言罗马不是一天建成的。语聊房当前架构也是不断演进的结果。在技术架构层面，语聊房作为搭建在直播体系上的业务，使用既有技术架构体系可以帮助我们快速搭建早期产品，但随着业务迭代，已有技术体系又成为新的技术架构的负债。同样在业务架构层面，语聊房产品已经迭代一年，产品形态依然在快速变化，已有的业务架构又会成为新的业务架构的阻碍。每一次产品需求的迭代，都会对已有技术架构和业务架构造成双重冲击。本文将结合语聊房持续演进的过程，谈谈业务视角下的架构演进。以及如何构建能应对各种变化的系统，不断达到新的平衡。语聊房\">\n                      本期作者序言罗马不是一天建成的。语聊房当前架构也是不断演进的结果。在技术架构层面，语聊房作为搭建在直播体系上的业务，使用既有技术架构体系可以帮助我们快速搭建早期产品，但随着业务迭代，已有技术体系又成为新的技术架构的负债。同样在业务架构层面，语聊房产品已经迭代一年，产品形态依然在快速变化，已有的业务架构又会成为新的业务架构的阻碍。每一次产品需求的迭代，都会对已有技术架构和业务架构造成双重冲击。本文将结合语聊房持续演进的过程，谈谈业务视角下的架构演进。以及如何构建能应对各种变化的系统，不断达到新的平衡。语聊房\n                    </a>","link":"https://www.bilibili.com/read/cv27682252","retrieved":1703352816252},{"title":"多容器动态化方案在游戏SDK中的实践","contents":"<a href=\"//www.bilibili.com/read/cv27603061\" target=\"_blank\" title=\"本期作者一、前言从产品运营角度来说，功能的用户触达是实现用户价值转化的最基本前提。所以如何快速将一个新的功能触达到用户，同时减少触达过程中对运营推广、用户带来额外的成本就成了一个必须被重视的课题。对于APP而言，以一个相对固定的节奏进行版本迭代，在一个迭代周期内，新版本基本可以达到一个相对较高的覆盖率。但对SDK而言，因为其并非直接面向用户，更像是一个ToB类产品，快速的版本迭代显然不是一个有效的途径，游戏SDK也不例外。二、背景与目标2.1 “三座大山”周期长，游戏SDK的功能触达用户需要一个月左右的时\">\n                      本期作者一、前言从产品运营角度来说，功能的用户触达是实现用户价值转化的最基本前提。所以如何快速将一个新的功能触达到用户，同时减少触达过程中对运营推广、用户带来额外的成本就成了一个必须被重视的课题。对于APP而言，以一个相对固定的节奏进行版本迭代，在一个迭代周期内，新版本基本可以达到一个相对较高的覆盖率。但对SDK而言，因为其并非直接面向用户，更像是一个ToB类产品，快速的版本迭代显然不是一个有效的途径，游戏SDK也不例外。二、背景与目标2.1 “三座大山”周期长，游戏SDK的功能触达用户需要一个月左右的时\n                    </a>","link":"https://www.bilibili.com/read/cv27603061","retrieved":1703352816254}]}