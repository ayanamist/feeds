{"title":"幻电物业 - B站技术中心","url":"https://space.bilibili.com/393183630/article","favicon":"https://space.bilibili.com/393183630/favicon.ico","elements":[{"title":"猫耳 Android 播放框架开发实践","contents":"<a href=\"//www.bilibili.com/read/cv27171599\" target=\"_blank\" title=\"本期作者概述猫耳FM是中国最大的 95 后声音内容分享平台，是B站重要平台之一，深度合作国内顶级声优工作室，打造了数百部精品广播剧，全站播放总量超过百亿次。MEPlayer 是猫耳 Android 技术团队研发的一款适用于音视频、直播、特效播放等多种场景的跨进程播放框架。目前支持：音视频、直播、特效播放。支持自定义播放内核，目前内置了 exo、bbp（多媒体部门开发的轻量级播放内核），都添加了边下边播支持，可以自行扩展支持 ijk 等内核，实现固定的几个接口即可。与业务完全解耦，已在公司内多个团队使用。跨\">\n                      本期作者概述猫耳FM是中国最大的 95 后声音内容分享平台，是B站重要平台之一，深度合作国内顶级声优工作室，打造了数百部精品广播剧，全站播放总量超过百亿次。MEPlayer 是猫耳 Android 技术团队研发的一款适用于音视频、直播、特效播放等多种场景的跨进程播放框架。目前支持：音视频、直播、特效播放。支持自定义播放内核，目前内置了 exo、bbp（多媒体部门开发的轻量级播放内核），都添加了边下边播支持，可以自行扩展支持 ijk 等内核，实现固定的几个接口即可。与业务完全解耦，已在公司内多个团队使用。跨\n                    </a>","link":"https://www.bilibili.com/read/cv27171599","retrieved":1698168846942},{"title":"B站视频模板的前世今生","contents":"<a href=\"//www.bilibili.com/read/cv27103118\" target=\"_blank\" title=\"本期作者一、前言1.创作的本质是什么从剪辑工具的角度，可以将创作拆解为主题、素材、剪辑三个要素主题：对应的品类 &amp; 风格，比如游戏、影视、泛生活等素材：用户使用的视频、音频、图片等内容剪辑：对素材进行时间、空间、效果上的调整，比如裁剪、复制、滤镜、转场、特效等视频模板恰好覆盖了创作的三个要素，限定「主题」和「剪辑手法」，允许用户填入部分「自定义素材」，降低用户创作门槛，实现B站的供增需求，从而辅助达成用增的目标2.B站视频模板的迭代历程竞品使用视频模板完成了大规模的起量，B站也在该领域进行不断的探索和迭代\">\n                      本期作者一、前言1.创作的本质是什么从剪辑工具的角度，可以将创作拆解为主题、素材、剪辑三个要素主题：对应的品类 &amp; 风格，比如游戏、影视、泛生活等素材：用户使用的视频、音频、图片等内容剪辑：对素材进行时间、空间、效果上的调整，比如裁剪、复制、滤镜、转场、特效等视频模板恰好覆盖了创作的三个要素，限定「主题」和「剪辑手法」，允许用户填入部分「自定义素材」，降低用户创作门槛，实现B站的供增需求，从而辅助达成用增的目标2.B站视频模板的迭代历程竞品使用视频模板完成了大规模的起量，B站也在该领域进行不断的探索和迭代\n                    </a>","link":"https://www.bilibili.com/read/cv27103118","retrieved":1698168846950},{"title":"基于多模态的视频高能点提取技术","contents":"<a href=\"//www.bilibili.com/read/cv27024849\" target=\"_blank\" title=\"本期作者1. 业务背景当用户在浏览B站时，首页所呈现的视频内容以卡片形式依序展示，这些视频卡片的封面大多数是与视频相关的静态图像。在制作视频时，up 主通常会选取视频中的某一帧并加上较为醒目的文案来制作封面；而电影和记录片则倾向于选择具有代表性的精彩帧画面作为封面展示。这种策略通过简洁、直观的封面设计，让用户在页面浏览的时候能迅速捕捉到视频的主题。图1.静态视频封面与仅能展示单帧画面的静态封面相比，动态视频封面会具有更多的优点，包括：更具吸引力和生动性：视频动态封面可以展示动态的画面、动作和效果，相比于静\">\n                      本期作者1. 业务背景当用户在浏览B站时，首页所呈现的视频内容以卡片形式依序展示，这些视频卡片的封面大多数是与视频相关的静态图像。在制作视频时，up 主通常会选取视频中的某一帧并加上较为醒目的文案来制作封面；而电影和记录片则倾向于选择具有代表性的精彩帧画面作为封面展示。这种策略通过简洁、直观的封面设计，让用户在页面浏览的时候能迅速捕捉到视频的主题。图1.静态视频封面与仅能展示单帧画面的静态封面相比，动态视频封面会具有更多的优点，包括：更具吸引力和生动性：视频动态封面可以展示动态的画面、动作和效果，相比于静\n                    </a>","link":"https://www.bilibili.com/read/cv27024849","retrieved":1698168846951},{"title":"挑战十万在播--直播全量在播分发系统","contents":"<a href=\"//www.bilibili.com/read/cv26960748\" target=\"_blank\" title=\"本期作者背景先说明下什么叫“全量在播”，指的是直播范围内，当前所有在线主播的信息，尤其是主播的房间id和uid，对于很多上游业务来说，是必要的数据，是业务逻辑的数据基础。直播之前虽然有一套这样的系统，但是从目前运行状态看并不能面向更高体量业务支撑，而且线上也因为这种过时的在播架构工作异常发生过几次线上事故。所以正如一本书所讲，如果不杀死任何系统，你会被僵尸包围。对于这种遗留系统需要做面向未来目标的设计。挑战面向未来的一两年我们有个很明确的目标，千万在线十万在播。其中后者十万在播，就是对于我们新的在播系统最\">\n                      本期作者背景先说明下什么叫“全量在播”，指的是直播范围内，当前所有在线主播的信息，尤其是主播的房间id和uid，对于很多上游业务来说，是必要的数据，是业务逻辑的数据基础。直播之前虽然有一套这样的系统，但是从目前运行状态看并不能面向更高体量业务支撑，而且线上也因为这种过时的在播架构工作异常发生过几次线上事故。所以正如一本书所讲，如果不杀死任何系统，你会被僵尸包围。对于这种遗留系统需要做面向未来目标的设计。挑战面向未来的一两年我们有个很明确的目标，千万在线十万在播。其中后者十万在播，就是对于我们新的在播系统最\n                    </a>","link":"https://www.bilibili.com/read/cv26960748","retrieved":1698168846951},{"title":"BILIVVC编码器在MSU国际视频编码器大赛中再获佳绩","contents":"<a href=\"//www.bilibili.com/read/cv26939477\" target=\"_blank\" title=\"本期作者2023年9月26日，2022年度MSU国际编码器大赛10bit赛道（http://www.compression.ru/video/codec_comparison/2022/10_bit_report.html）结果揭晓哔哩哔哩基于H.266标准自主研发的编码器BILIVVC在 1fps档位取得了 YUV-SSIM 性能综合第三名成绩，在5fps档位取得了 YUV-SSIM 和 YUV-PSNR性能综合第二名的成绩。MSU 编码器比赛是视频编码业内影响力最大的国际比赛，通过多赛道，多维度的评价\">\n                      本期作者2023年9月26日，2022年度MSU国际编码器大赛10bit赛道（http://www.compression.ru/video/codec_comparison/2022/10_bit_report.html）结果揭晓哔哩哔哩基于H.266标准自主研发的编码器BILIVVC在 1fps档位取得了 YUV-SSIM 性能综合第三名成绩，在5fps档位取得了 YUV-SSIM 和 YUV-PSNR性能综合第二名的成绩。MSU 编码器比赛是视频编码业内影响力最大的国际比赛，通过多赛道，多维度的评价\n                    </a>","link":"https://www.bilibili.com/read/cv26939477","retrieved":1698168846954},{"title":"B站无参视频画质评价的研究与应用","contents":"<a href=\"//www.bilibili.com/read/cv26787690\" target=\"_blank\" title=\"本期作者前言B 站在为用户提供优质视频内容的同时，还要保障用户的观看体验，而视频画质是影响用户观看体验的重要因素。为了保证用户观看到的视频画质清晰，B 站建设了画质监控系统，并自研了很多视频图像分析和处理算法，但不论是研发算法，还是量化用户观看体验，都绕不开同一个问题：“如何评价视频的画质？”。视频质量评价（Video Quality Assessment，VQA）是视频图像应用的终极问题之一。图1：VQA 是视频图像应用的终极问题之一为了对视频质量进行准确的评价，我们研发了一套基于深度学习的无参考视频画\">\n                      本期作者前言B 站在为用户提供优质视频内容的同时，还要保障用户的观看体验，而视频画质是影响用户观看体验的重要因素。为了保证用户观看到的视频画质清晰，B 站建设了画质监控系统，并自研了很多视频图像分析和处理算法，但不论是研发算法，还是量化用户观看体验，都绕不开同一个问题：“如何评价视频的画质？”。视频质量评价（Video Quality Assessment，VQA）是视频图像应用的终极问题之一。图1：VQA 是视频图像应用的终极问题之一为了对视频质量进行准确的评价，我们研发了一套基于深度学习的无参考视频画\n                    </a>","link":"https://www.bilibili.com/read/cv26787690","retrieved":1698168846955},{"title":"直播房间服务基于CQRS的架构演进实践","contents":"<a href=\"//www.bilibili.com/read/cv26728643\" target=\"_blank\" title=\"本期作者引言房间系统是直播业务的“基石”，开播和看播两大体系都是围绕房间场景展开。房间系统架构也经历一系列的升级和挑战，从房间读多活、混沌流量治理、热点发现、多级缓存等，支撑了S11破千万PCU的流量洪峰冲击。为了应对业务更大的挑战，基于CQRS思想，分离大流量的用户高读场景（Query）和注重数据强一致性的开播创建房间等写场景（Command）。对于用户端可以无状态无限制的扩容服务副本，做到支持更大线上用户同时在线的目标。背景直播业务的技术服务体系也实践过从单体到微服务化的演进之路，以技术视角看微服务体\">\n                      本期作者引言房间系统是直播业务的“基石”，开播和看播两大体系都是围绕房间场景展开。房间系统架构也经历一系列的升级和挑战，从房间读多活、混沌流量治理、热点发现、多级缓存等，支撑了S11破千万PCU的流量洪峰冲击。为了应对业务更大的挑战，基于CQRS思想，分离大流量的用户高读场景（Query）和注重数据强一致性的开播创建房间等写场景（Command）。对于用户端可以无状态无限制的扩容服务副本，做到支持更大线上用户同时在线的目标。背景直播业务的技术服务体系也实践过从单体到微服务化的演进之路，以技术视角看微服务体\n                    </a>","link":"https://www.bilibili.com/read/cv26728643","retrieved":1698168846958},{"title":"面向规模化的视频数字水印解决方案","contents":"<a href=\"//www.bilibili.com/read/cv26659031\" target=\"_blank\" title=\"本期作者前言在线视频领域的繁荣离不开创作者在内容生产环节的辛勤耕耘。视频既是信息得以高速传播的有效载体，也是创作者的劳动成果，本质上也是一种虚拟资产。随着版权意识的崛起，越来越多的创作者和观众都在为保护版权做着不懈努力。然而整个版权环境的建立需要一定的过程，在此期间存在着大量的侵权行为，如对视频未经授权的盗用、剪辑、跨平台间的搬运、未经许可的商用行为等等。同时，对侵权行为的查验、举证、界定等环节都需要耗费大量的人力物力，并可能存在创作者较难处理的技术及法律难点，导致维权本身变成一个成本极高却收效胜微的事情\">\n                      本期作者前言在线视频领域的繁荣离不开创作者在内容生产环节的辛勤耕耘。视频既是信息得以高速传播的有效载体，也是创作者的劳动成果，本质上也是一种虚拟资产。随着版权意识的崛起，越来越多的创作者和观众都在为保护版权做着不懈努力。然而整个版权环境的建立需要一定的过程，在此期间存在着大量的侵权行为，如对视频未经授权的盗用、剪辑、跨平台间的搬运、未经许可的商用行为等等。同时，对侵权行为的查验、举证、界定等环节都需要耗费大量的人力物力，并可能存在创作者较难处理的技术及法律难点，导致维权本身变成一个成本极高却收效胜微的事情\n                    </a>","link":"https://www.bilibili.com/read/cv26659031","retrieved":1698168846960},{"title":"B站系统环境基线管理实践","contents":"<a href=\"//www.bilibili.com/read/cv26606555\" target=\"_blank\" title=\"本期作者1.背景1.1.基本概念系统环境：是指服务器上运行的某个系统版本的系统配置集合，具体的配置项包括内核模块和内核参数配置、网络设置、系统软件或工具、系统服务、安全配置等等。基线：指的是服务器系统环境配置集合的一个基准。系统环境基线管理：对一套系统环境配置集合基准的管理。下文中我们说基线管理，系统环境配置集合管理，简称系统环境管理，是同一个意思。1.2.必要性系统环境配置直接影响线上操作系统运行环境的稳定、高效与安全，其重要性不言而寓。在基线管理初级阶段主要通过shell脚本的方式管理系统环境，比如服\">\n                      本期作者1.背景1.1.基本概念系统环境：是指服务器上运行的某个系统版本的系统配置集合，具体的配置项包括内核模块和内核参数配置、网络设置、系统软件或工具、系统服务、安全配置等等。基线：指的是服务器系统环境配置集合的一个基准。系统环境基线管理：对一套系统环境配置集合基准的管理。下文中我们说基线管理，系统环境配置集合管理，简称系统环境管理，是同一个意思。1.2.必要性系统环境配置直接影响线上操作系统运行环境的稳定、高效与安全，其重要性不言而寓。在基线管理初级阶段主要通过shell脚本的方式管理系统环境，比如服\n                    </a>","link":"https://www.bilibili.com/read/cv26606555","retrieved":1698168846964},{"title":"B站大数据系统诊断实践-SQLSCAN篇","contents":"<a href=\"//www.bilibili.com/read/cv26525526\" target=\"_blank\" title=\"本期作者前言：B站大数据系统诊断系列包含三款产品: SQLScan, BMR大数据元仓以及数据智囊。本篇将给大家详细介绍第一部分SQLScan。1.平台整体介绍1.1 数据平台介绍随着B站业务的高速发展以及大数据平台产品生态的逐渐丰富，我们提供了数据开发，数据集成，数据服务，数据管理，数据安全，数据治理以及数据诊断等优秀的产品去构建开发和治理一体的全生命周期开发平台，提升数据开发效率和质量，加速数据分析效率。图1 产品总览2.背景介绍B站离线ETL和查询任务每天有几十万次，期间遇了多次数据质量相关的问题。\">\n                      本期作者前言：B站大数据系统诊断系列包含三款产品: SQLScan, BMR大数据元仓以及数据智囊。本篇将给大家详细介绍第一部分SQLScan。1.平台整体介绍1.1 数据平台介绍随着B站业务的高速发展以及大数据平台产品生态的逐渐丰富，我们提供了数据开发，数据集成，数据服务，数据管理，数据安全，数据治理以及数据诊断等优秀的产品去构建开发和治理一体的全生命周期开发平台，提升数据开发效率和质量，加速数据分析效率。图1 产品总览2.背景介绍B站离线ETL和查询任务每天有几十万次，期间遇了多次数据质量相关的问题。\n                    </a>","link":"https://www.bilibili.com/read/cv26525526","retrieved":1698168846965},{"title":"Font2svg 特殊字体渲染方案","contents":"<a href=\"//www.bilibili.com/read/cv26464950\" target=\"_blank\" title=\"本期作者背景介绍在 Web 开发中，经常会需要在页面中引入一些特殊字体，这些字体通常不在系统字体库的范围内，并且动辄 4~5MB，甚至有些字体超过 10MB，会影响用户加载体验，尤其在手机端使用移动网络的情况下。针对不同的业务场景，通常会有以下几种解决方案：一、使用切图当需要显示特殊字体的文案为固定文案时，直接使用切图可能是最常见的一种解决方案，无论是透明的 PNG 切图，还是用矢量的 SVG，都能在便捷度和加载体验上有不错的体验。当然，使用 PNG 的时候需要注意高分辨率屏幕的适配，使用1倍图在高分辨率\">\n                      本期作者背景介绍在 Web 开发中，经常会需要在页面中引入一些特殊字体，这些字体通常不在系统字体库的范围内，并且动辄 4~5MB，甚至有些字体超过 10MB，会影响用户加载体验，尤其在手机端使用移动网络的情况下。针对不同的业务场景，通常会有以下几种解决方案：一、使用切图当需要显示特殊字体的文案为固定文案时，直接使用切图可能是最常见的一种解决方案，无论是透明的 PNG 切图，还是用矢量的 SVG，都能在便捷度和加载体验上有不错的体验。当然，使用 PNG 的时候需要注意高分辨率屏幕的适配，使用1倍图在高分辨率\n                    </a>","link":"https://www.bilibili.com/read/cv26464950","retrieved":1698168846967},{"title":"告警平台：给告警一个胶带","contents":"<a href=\"//www.bilibili.com/read/cv26375467\" target=\"_blank\" title=\"本期作者给告警一个胶带，是“胶带”，也是“交代”。“胶带”，是因为告警是质量管理的关键工具和手段，需要粘合研发与运维、基架与业务，齐心并力；“交代”，是因为历史各种因素导致告警噪音大，今年经过地推式治理后，告警体验大为改善，在这个时间点给大家一个交代。一、背景介绍告警是指当监控数据发生异常并触发告警策略的时候，系统按照通知策略发送通知。告警平台是落实告警功能的基础平台，是互联网公司的必备的基础设施之一。在熟悉告警平台之前，我们先了解下告警的必要性和复杂性。1）告警的必要性在于：研发几乎不可能对系统存在的风\">\n                      本期作者给告警一个胶带，是“胶带”，也是“交代”。“胶带”，是因为告警是质量管理的关键工具和手段，需要粘合研发与运维、基架与业务，齐心并力；“交代”，是因为历史各种因素导致告警噪音大，今年经过地推式治理后，告警体验大为改善，在这个时间点给大家一个交代。一、背景介绍告警是指当监控数据发生异常并触发告警策略的时候，系统按照通知策略发送通知。告警平台是落实告警功能的基础平台，是互联网公司的必备的基础设施之一。在熟悉告警平台之前，我们先了解下告警的必要性和复杂性。1）告警的必要性在于：研发几乎不可能对系统存在的风\n                    </a>","link":"https://www.bilibili.com/read/cv26375467","retrieved":1698168846972}]}