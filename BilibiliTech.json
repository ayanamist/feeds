{"title":"幻电物业 - B站技术中心","url":"https://space.bilibili.com/393183630/article","favicon":"https://space.bilibili.com/393183630/favicon.ico","elements":[{"title":"2022精选技术干货 | 哔哩哔哩技术最受欢迎的20篇文章","contents":"<a href=\"//www.bilibili.com/read/cv21013987\" target=\"_blank\" title=\"哔哩哔哩技术精彩回顾（点击标题查看） 01 2021.07.13 我们是这样崩的2021年7月13日22:52，SRE收到大量服务和域名的接入层不可用报警，客服侧开始收到大量用户反馈B站无法使用，同时内部同学也反馈B站无法打开，甚至APP首页也无法打开。基于报警内容，SRE第一时间怀疑机房、网络、四层LB、七层SLB等基础设施出现问题，紧急发起语音会议，拉各团队相关人员开始紧急处理。02 B站在全链路压测上的实践压测是对服务性能和容量预估最有效的手段，而全链路压测是众多压测方案中仿真度最高的一种,能够更加\">\n                      哔哩哔哩技术精彩回顾（点击标题查看） 01 2021.07.13 我们是这样崩的2021年7月13日22:52，SRE收到大量服务和域名的接入层不可用报警，客服侧开始收到大量用户反馈B站无法使用，同时内部同学也反馈B站无法打开，甚至APP首页也无法打开。基于报警内容，SRE第一时间怀疑机房、网络、四层LB、七层SLB等基础设施出现问题，紧急发起语音会议，拉各团队相关人员开始紧急处理。02 B站在全链路压测上的实践压测是对服务性能和容量预估最有效的手段，而全链路压测是众多压测方案中仿真度最高的一种,能够更加\n                    </a>","link":"https://www.bilibili.com/read/cv21013987","retrieved":1673328867086},{"title":"热点检测治理","contents":"<a href=\"//www.bilibili.com/read/cv20999025\" target=\"_blank\" title=\"本期作者01 背景对于大部分互联网应用，数据访问频次分布通常满足二八定律，头部的20%数据往往占据超过80%的访问流量。在业务早期，由于流量较小，数据库就可以满足所有的访问流量，随着业务的发展，数据库无法抗住所有的流量，此时通常会引入高性能的缓存，用于缓解数据库的访问压力。得益于数据的二八分布，缓存的容量通常远远小于数据库的总容量，但是却能保证大部分的热点数据请求命中缓存。这一套数据库+分布式缓存的架构在大部分场景中可以工作的很好。但是当出现热门活动以及突发热点时，缓存也极有可能被打崩。以S12为例，由于\">\n                      本期作者01 背景对于大部分互联网应用，数据访问频次分布通常满足二八定律，头部的20%数据往往占据超过80%的访问流量。在业务早期，由于流量较小，数据库就可以满足所有的访问流量，随着业务的发展，数据库无法抗住所有的流量，此时通常会引入高性能的缓存，用于缓解数据库的访问压力。得益于数据的二八分布，缓存的容量通常远远小于数据库的总容量，但是却能保证大部分的热点数据请求命中缓存。这一套数据库+分布式缓存的架构在大部分场景中可以工作的很好。但是当出现热门活动以及突发热点时，缓存也极有可能被打崩。以S12为例，由于\n                    </a>","link":"https://www.bilibili.com/read/cv20999025","retrieved":1673328867095},{"title":"Promise: 异步编程的理解和使用","contents":"<a href=\"//www.bilibili.com/read/cv20922299\" target=\"_blank\" title=\"本期作者01 什么是 Promise 1.1 Promise 的背景介绍Promise 最早出现在 1988 年，由 Barbara Liskov、Liuba Shrira 首创（论文：Promises: Linguistic Support for Efficient Asynchronous Procedure Calls in Distributed Systems[1]）。并且在语言 MultiLisp 和 Concurrent Prolog 中已经有了类似的实现。JavaScript 中，Pro\">\n                      本期作者01 什么是 Promise 1.1 Promise 的背景介绍Promise 最早出现在 1988 年，由 Barbara Liskov、Liuba Shrira 首创（论文：Promises: Linguistic Support for Efficient Asynchronous Procedure Calls in Distributed Systems[1]）。并且在语言 MultiLisp 和 Concurrent Prolog 中已经有了类似的实现。JavaScript 中，Pro\n                    </a>","link":"https://www.bilibili.com/read/cv20922299","retrieved":1673328867101},{"title":"IEEE VCIP | B站窄带高清转码系统中的编码方法","contents":"<a href=\"//www.bilibili.com/read/cv20922435\" target=\"_blank\" title=\"B站窄带高清转码系统中的关键算法 —— 基于 2pass 深度学习码率因子预测的恒定画质的分段编码方法，成功被 IEEE 国际会议 VCIP 2022 接收。该方法可以以 98.8% 的准确率控制编码视频的质量，为B站节省了超过 15% 的码率成本B站每天都会接收数十万的视频投稿，其中有些作品会成为热门视频，这些热门视频吸引了大部分用户的关注，同时也会消耗大部分的带宽资源。B站会对热门视频进行优化转码，此时会使用窄带高清转码系统，以更高复杂度的编码方法，在保持画质不变的前提下，进一步去除数据冗余，避免带宽\">\n                      B站窄带高清转码系统中的关键算法 —— 基于 2pass 深度学习码率因子预测的恒定画质的分段编码方法，成功被 IEEE 国际会议 VCIP 2022 接收。该方法可以以 98.8% 的准确率控制编码视频的质量，为B站节省了超过 15% 的码率成本B站每天都会接收数十万的视频投稿，其中有些作品会成为热门视频，这些热门视频吸引了大部分用户的关注，同时也会消耗大部分的带宽资源。B站会对热门视频进行优化转码，此时会使用窄带高清转码系统，以更高复杂度的编码方法，在保持画质不变的前提下，进一步去除数据冗余，避免带宽\n                    </a>","link":"https://www.bilibili.com/read/cv20922435","retrieved":1673328867108},{"title":"B站HTTPDNS自研降本之道","contents":"<a href=\"//www.bilibili.com/read/cv20833056\" target=\"_blank\" title=\"本期作者罗丹多媒体技术部资深开发工程师龚振资深客户端开发工程师何博阳资深SRE01 背景公司目前使用的HTTPDNS服务是商业的HTTPDNS服务，商业的HTTPDNS服务按次收费，HTTPDNS大致收费价格如下图（摘自某云厂商，仅供参考）看似价格不高，但是在庞大的用户基数和数以千亿次的使用量的基础下，每月的成本也高达大几十万，一年的费用也够在国正中心旁边买套老房子了，而且随着业务量的增长，成本还会进一步的增长。在公司降本增效的大背景之下，经过公司各位大佬们的评估，自研HTTPDNS服务降低HTTPDNS\">\n                      本期作者罗丹多媒体技术部资深开发工程师龚振资深客户端开发工程师何博阳资深SRE01 背景公司目前使用的HTTPDNS服务是商业的HTTPDNS服务，商业的HTTPDNS服务按次收费，HTTPDNS大致收费价格如下图（摘自某云厂商，仅供参考）看似价格不高，但是在庞大的用户基数和数以千亿次的使用量的基础下，每月的成本也高达大几十万，一年的费用也够在国正中心旁边买套老房子了，而且随着业务量的增长，成本还会进一步的增长。在公司降本增效的大背景之下，经过公司各位大佬们的评估，自研HTTPDNS服务降低HTTPDNS\n                    </a>","link":"https://www.bilibili.com/read/cv20833056","retrieved":1673328867109},{"title":"哔哩哔哩内网 DNS 实践","contents":"<a href=\"//www.bilibili.com/read/cv20833180\" target=\"_blank\" title=\"本期作者01 引言域名系统(DNS)就像是互联网的地址簿，通过将一个或多个复杂难记的IP地址映射到容易识别和记忆的域名上，便于人们通过简单的域名比如 bilibili.com 访问互联网资源。在此基础上，DNS 还提供了负载均衡等重要服务。是极为关键的互联网基础设施。以 DNS 为基础的内网 DNS 服务则提供了一些额外的好处：1. 私有域名方便内网服务互联互通外界无法感知和探测到，满足了安全性和隐私方面的需求2. DNS 劫持拦截特定公网域名到内网 ip，降低公网带宽和访问延迟。如某核心服务 A 早期只\">\n                      本期作者01 引言域名系统(DNS)就像是互联网的地址簿，通过将一个或多个复杂难记的IP地址映射到容易识别和记忆的域名上，便于人们通过简单的域名比如 bilibili.com 访问互联网资源。在此基础上，DNS 还提供了负载均衡等重要服务。是极为关键的互联网基础设施。以 DNS 为基础的内网 DNS 服务则提供了一些额外的好处：1. 私有域名方便内网服务互联互通外界无法感知和探测到，满足了安全性和隐私方面的需求2. DNS 劫持拦截特定公网域名到内网 ip，降低公网带宽和访问延迟。如某核心服务 A 早期只\n                    </a>","link":"https://www.bilibili.com/read/cv20833180","retrieved":1673328867110},{"title":"AF_XDP在B站CDN节点QUIC网关的应用和落地","contents":"<a href=\"//www.bilibili.com/read/cv20778694\" target=\"_blank\" title=\"本期作者01 背景目前B站已在自建视频CDN下行中全量部署了基于QUIC和HTTP/3协议的网关服务（以下简称QUIC网关）。和TCP网关相比，QUIC网关在视频首帧、卡顿率以及加载失败率等常见的QoE/QoS指标方面都有不错的收益。另一方面，由于QUIC使用了更复杂的协议头和解析规则，此外Linux内核对UDP收发包的性能也不甚理想，这些方面都使得QUIC占用了更多的CPU负载，最终导致了更多资源成本的消耗。为了给B站用户提供更稳定流畅的视频观看体验，同时降低成本，网络协议组团队通过技术选型，排除了DP\">\n                      本期作者01 背景目前B站已在自建视频CDN下行中全量部署了基于QUIC和HTTP/3协议的网关服务（以下简称QUIC网关）。和TCP网关相比，QUIC网关在视频首帧、卡顿率以及加载失败率等常见的QoE/QoS指标方面都有不错的收益。另一方面，由于QUIC使用了更复杂的协议头和解析规则，此外Linux内核对UDP收发包的性能也不甚理想，这些方面都使得QUIC占用了更多的CPU负载，最终导致了更多资源成本的消耗。为了给B站用户提供更稳定流畅的视频观看体验，同时降低成本，网络协议组团队通过技术选型，排除了DP\n                    </a>","link":"https://www.bilibili.com/read/cv20778694","retrieved":1673328867110},{"title":"B站数据服务中台建设实践","contents":"<a href=\"//www.bilibili.com/read/cv20683987\" target=\"_blank\" title=\"本期作者01 背景随着公司业务的发展，对于数据的需求会越来越多。怎么在业务系统中高效的使用数据，让业务系统处理大数据时化繁为简，数据服务化基本是必经之路。那么什么是数据服务化，简单理解就是数据SaaS，通过一些数据库语言把数据转化成服务，如API、RPC、数据文件 等不同的数据方式提供给业务系统使用。经过多年对各个业务系统对接调研发现，大家感受到了无标准、不统一及烟囱式建设的服务接口的痛点，希望可以建设一套标准的，中台化的数据服务平台。数据服务中台以解决业务中痛点为优先，主要的痛点如下：1. 数据接入方式\">\n                      本期作者01 背景随着公司业务的发展，对于数据的需求会越来越多。怎么在业务系统中高效的使用数据，让业务系统处理大数据时化繁为简，数据服务化基本是必经之路。那么什么是数据服务化，简单理解就是数据SaaS，通过一些数据库语言把数据转化成服务，如API、RPC、数据文件 等不同的数据方式提供给业务系统使用。经过多年对各个业务系统对接调研发现，大家感受到了无标准、不统一及烟囱式建设的服务接口的痛点，希望可以建设一套标准的，中台化的数据服务平台。数据服务中台以解决业务中痛点为优先，主要的痛点如下：1. 数据接入方式\n                    </a>","link":"https://www.bilibili.com/read/cv20683987","retrieved":1673328867111},{"title":"推荐算法在用例排序优化上的应用","contents":"<a href=\"//www.bilibili.com/read/cv20605350\" target=\"_blank\" title=\"本期作者01 背景随着持续集成和敏捷开发的不断发展，移动应用的发布变得越来越频繁。以B站应用为例，主站粉版APP每周都会发布一次新的版本，主站HD应用的Android端与ipad端每周交替发布新的版本。在应用快速迭代的同时，QA需要在规定时间内进行大量的回归测试以保证应用的质量。一方面，大量的测试用例需要耗费较多的人力和时间，另一方面，BUG检出时间的不确定性导致给予研发修复的时间并不是很充足。因此急需一种技术来帮助QA快速筛选出高风险用例，将BUG的发现时间提前，从而给研发更多时间去修复BUG\">\n                      本期作者01 背景随着持续集成和敏捷开发的不断发展，移动应用的发布变得越来越频繁。以B站应用为例，主站粉版APP每周都会发布一次新的版本，主站HD应用的Android端与ipad端每周交替发布新的版本。在应用快速迭代的同时，QA需要在规定时间内进行大量的回归测试以保证应用的质量。一方面，大量的测试用例需要耗费较多的人力和时间，另一方面，BUG检出时间的不确定性导致给予研发修复的时间并不是很充足。因此急需一种技术来帮助QA快速筛选出高风险用例，将BUG的发现时间提前，从而给研发更多时间去修复BUG\n                    </a>","link":"https://www.bilibili.com/read/cv20605350","retrieved":1673328867112},{"title":"B站公网架构实践及演进","contents":"<a href=\"//www.bilibili.com/read/cv20514806\" target=\"_blank\" title=\"本期作者哔哩哔哩系统部网络团队负责B站数据中心网络规划、设计、建设、运维与优化，为公司业务提供稳定且可靠的网络服务。整个团队专注于数据中心内外网、骨干网络、负载均衡、传输网络、虚拟化网络以及国际化网络的落地和应用，并根据业务的发展需求不断迭代更新底层基础网络设施。01 引言根据2022年Q3财报数据，B站的MAU已经稳定增长至3.3亿。用户在闲暇之余刷刷视频、看看直播，给自己喜爱的UP主一键三连，已经成为了生活中不可缺少的一部分。B站基础网络团队本着社区优先的理念，持续优化互联网接入网络架构，近\">\n                      本期作者哔哩哔哩系统部网络团队负责B站数据中心网络规划、设计、建设、运维与优化，为公司业务提供稳定且可靠的网络服务。整个团队专注于数据中心内外网、骨干网络、负载均衡、传输网络、虚拟化网络以及国际化网络的落地和应用，并根据业务的发展需求不断迭代更新底层基础网络设施。01 引言根据2022年Q3财报数据，B站的MAU已经稳定增长至3.3亿。用户在闲暇之余刷刷视频、看看直播，给自己喜爱的UP主一键三连，已经成为了生活中不可缺少的一部分。B站基础网络团队本着社区优先的理念，持续优化互联网接入网络架构，近\n                    </a>","link":"https://www.bilibili.com/read/cv20514806","retrieved":1673328867113},{"title":"哔哩哔哩Android打包优化与云编译","contents":"<a href=\"//www.bilibili.com/read/cv20442798\" target=\"_blank\" title=\"本期作者01 背景介绍B站使用大仓模式进行源码依赖管理，大仓模有优势也有挑战，截止目前为止 Android 仓库子模块有620+，开发人员150+。本地开发存在编译慢、机器发热、卡死、阻塞开发等问题。介于此前移动端已有庞大的 CI 构建集群，我们探索出一种新的开发编译方式——云编译。02 原理简介俗话说性能不够硬件来凑，得益于公司的高配置服务器资源，我们移动端可以很方便地使用云端资源提高编译速度。通过 git 同步本地与远端代码基点，结合 diff 文件还原本地开发中产生的差异改动，然后编译出与\">\n                      本期作者01 背景介绍B站使用大仓模式进行源码依赖管理，大仓模有优势也有挑战，截止目前为止 Android 仓库子模块有620+，开发人员150+。本地开发存在编译慢、机器发热、卡死、阻塞开发等问题。介于此前移动端已有庞大的 CI 构建集群，我们探索出一种新的开发编译方式——云编译。02 原理简介俗话说性能不够硬件来凑，得益于公司的高配置服务器资源，我们移动端可以很方便地使用云端资源提高编译速度。通过 git 同步本地与远端代码基点，结合 diff 文件还原本地开发中产生的差异改动，然后编译出与\n                    </a>","link":"https://www.bilibili.com/read/cv20442798","retrieved":1673328867114},{"title":"哔哩哔哩正式通过ISO27001、ISO27701、ISO29151三重认证","contents":"<a href=\"//www.bilibili.com/read/cv20442794\" target=\"_blank\" title=\"前言近日，哔哩哔哩正式通过ISO三认证，获得由中国质量认证中心（CQC）官方颁发的ISO/IEC27001信息安全管理体系认证证书和ISO/IEC27701隐私信息管理体系认证证书和ISO/IEC29151个人可识别信息保护管理体系认证证书，包括B站境内经营主体上海宽娱数码科技有限公司、B站海外经营主体BILIBILI COMICS PTE. LTD. 、B站海外经营主体BALABOOM PTE. LTD.ISO27001信息安全管理体系认证证书ISO27001是信息安全管理体系的规范标准，是\">\n                      前言近日，哔哩哔哩正式通过ISO三认证，获得由中国质量认证中心（CQC）官方颁发的ISO/IEC27001信息安全管理体系认证证书和ISO/IEC27701隐私信息管理体系认证证书和ISO/IEC29151个人可识别信息保护管理体系认证证书，包括B站境内经营主体上海宽娱数码科技有限公司、B站海外经营主体BILIBILI COMICS PTE. LTD. 、B站海外经营主体BALABOOM PTE. LTD.ISO27001信息安全管理体系认证证书ISO27001是信息安全管理体系的规范标准，是\n                    </a>","link":"https://www.bilibili.com/read/cv20442794","retrieved":1673328867115}]}